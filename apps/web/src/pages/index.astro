---
import Layout from "../layouts/Layout.astro";
import Marketplace from "../components/Marketplace.tsx";
import { supabase } from "../lib/supabase";
import { imageConfig } from "astro:assets";
import PhotoDial from "../components/PhotoDial.tsx";

// 1. 服务端获取数据 (Server Side)
const { data: items, error } = await supabase
	.from("items")
	.select("*")
	.limit(10);

if (error) {
	console.error("Error fetching items:", error);
}
---

<Layout title="UniPick Home">
	<header
		class="sticky top-0 z-10 bg-white/80 backdrop-blur-md border-b border-gray-100 px-4 py-3 flex justify-between items-center"
	>
		<h1 class="text-xl font-bold text-orange-600 tracking-tight">
			UniPick
		</h1>
		<button class="bg-gray-100 p-2 rounded-full">
			<svg
				xmlns="http://www.w3.org/2000/svg"
				width="20"
				height="20"
				viewBox="0 0 24 24"
				fill="none"
				stroke="currentColor"
				stroke-width="2"
				stroke-linecap="round"
				stroke-linejoin="round"
				><circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.3-4.3"
				></path></svg
			>
		</button>
	</header>

	<!-- <main>
			<Marketplace client:load />
		</main> -->

	<main class="min-h-screen">
		<div class="text-red-500">HELLO</div>
		<div class="min-h-screen">
			<PhotoDial client:load mode="3D" />
		</div>
	</main>
</Layout>

<style is:global>
	/* 全局样式，用于 Tailwind 无法直接控制的 CSS 变量或动画 */
	/* 定义自定义 transform-style 和 perspective */
	.transform-style-3d {
		transform-style: preserve-3d;
	}
	.perspective-1000 {
		perspective: 1000px;
	}

	/* 文本阴影为了复古感，Tailwind 没有直接的类，手动添加 */
	.text-shadow-cyan {
		text-shadow: 0 0 5px #00ffff;
	}
	.text-shadow-gold {
		text-shadow: 0 0 5px #ffd700;
	}
</style>
