---
import Layout from "../layouts/Layout.astro";
import Marketplace from "../components/Marketplace.tsx";
import { supabase } from "../lib/supabase";

// 1. 服务端获取数据 (Server Side)
const { data: items, error } = await supabase
	.from("items")
	.select("*")
	.limit(10);

if (error) {
	console.error("Error fetching items:", error);
}
---

<Layout title="UniPick Home">
		<header
			class="sticky top-0 z-10 bg-white/80 backdrop-blur-md border-b border-gray-100 px-4 py-3 flex justify-between items-center"
		>
			<h1 class="text-xl font-bold text-orange-600 tracking-tight">
				UniPick
			</h1>
			<button class="bg-gray-100 p-2 rounded-full">
				<svg
					xmlns="http://www.w3.org/2000/svg"
					width="20"
					height="20"
					viewBox="0 0 24 24"
					fill="none"
					stroke="currentColor"
					stroke-width="2"
					stroke-linecap="round"
					stroke-linejoin="round"
					><circle cx="11" cy="11" r="8"></circle><path
						d="m21 21-4.3-4.3"></path></svg
				>
			</button>
		</header>

		<main>
			<Marketplace client:load />
		</main>
</Layout>
